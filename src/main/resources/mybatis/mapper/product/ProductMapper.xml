<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.saber.credit.mapper.UserMapper">

    <select id="queryById" resultType="com.saber.credit.entities.Product">
        SELECT u.ID id,u.NAME name,u.PHONE PHONE,a.FROM_ID fromName,a.CREATE_DATE registerDate,a.FIRST_LOGIN_DATE firstLoginDate,CASE
        WHEN TIMESTAMPDIFF(HOUR,a.CREATE_DATE,a.FIRST_LOGIN_DATE) &lt; 1 THEN '1小时内' ELSE
        CONCAT(TIMESTAMPDIFF(HOUR,a.CREATE_DATE,a.FIRST_LOGIN_DATE),'小时')
        END intervalTime,a.LOGIN_COUNT loginCount,r.DEVICE_ID deviceId,
        r.DEVICE_TYPE deviceType,u.NATIVE_PLACE nativePlace,r.NETWORK network
        from SEC_USER u
        LEFT JOIN
        USER_ACTIVE a  ON u.id = a.user_id
        LEFT JOIN
        DEVICE_REGISTER r ON r.USER_ID = u.ID
        where u.id = #{id}
    </select>

    <select id="query" resultType="com.saber.credit.entities.Product">
        select *  from SEC_USER
    </select>

    <select id="queryDetail" resultType="com.saber.credit.entities.Product">
        SELECT u.ID id,u.NAME name,u.PHONE PHONE,a.FROM_ID fromName,a.CREATE_DATE registerDate,a.FIRST_LOGIN_DATE firstLoginDate,CASE
        WHEN TIMESTAMPDIFF(HOUR,a.CREATE_DATE,a.FIRST_LOGIN_DATE) &lt; 1 THEN '1小时内' ELSE
        CONCAT(TIMESTAMPDIFF(HOUR,a.CREATE_DATE,a.FIRST_LOGIN_DATE),'小时')
        END intervalTime,a.LOGIN_COUNT loginCount,r.DEVICE_ID deviceId,r.DEVICE_TYPE deviceType
        from SEC_USER u
        LEFT JOIN
        USER_ACTIVE a  ON u.id = a.user_id
        LEFT JOIN
        DEVICE_REGISTER r ON r.USER_ID = u.ID
    </select>


</mapper>